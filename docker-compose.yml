services:
  app:
    # Use pre-built image from GitHub Container Registry
    image: ghcr.io/kasuha07/uestc-power-monitor:latest
    # Or build locally (uncomment the line below and comment out the image line above)
    # build: .
    container_name: uestc-power-monitor
    restart: unless-stopped
    volumes:
      # Mount local configuration file
      - ./config.toml:/app/config.toml
      # Mount data directory for SQLite database persistence
      - ./data:/app/data
    environment:
      # Timezone configuration
      - TZ=Asia/Shanghai
      # Override database URL to use persistent volume
      - UPM_DATABASE_URL=sqlite://data/power_monitor.db
      # You can set credentials here or in config.toml
      # - UPM_USERNAME=your_student_id
      # - UPM_PASSWORD=your_password
      # Proxy settings (uncomment if needed)
      # - HTTPS_PROXY=http://proxy.example.com:8080
      # - HTTP_PROXY=http://proxy.example.com:8080

